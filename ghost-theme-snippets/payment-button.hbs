{{!-- 
Ghost Theme Payment Button Snippet
Add this to your Ghost theme where you want the payment button to appear
--}}

<div class="ghost-razorpay-payment-section">
    <h3>Subscribe to Premium Content</h3>
    <p>Get access to exclusive content and support our work.</p>
    
    <!-- Payment Form -->
    <form id="ghost-payment-form" class="payment-form">
        <div class="form-group">
            <label for="member-email">Email Address *</label>
            <input type="email" id="member-email" name="email" required placeholder="your.email@example.com">
        </div>
        
        <div class="form-group">
            <label for="member-name">Full Name</label>
            <input type="text" id="member-name" name="name" placeholder="Your Name">
        </div>
        
        <div class="form-group">
            <label for="membership-tier">Membership Tier</label>
            <select id="membership-tier" name="tier">
                <option value="basic">Basic - ₹1,000</option>
                <option value="premium">Premium - ₹2,500</option>
                <option value="pro">Pro - ₹5,000</option>
            </select>
        </div>
        
        <button type="submit" class="razorpay-payment-btn">
            Pay with Razorpay
        </button>
    </form>
</div>

<style>
.ghost-razorpay-payment-section {
    max-width: 400px;
    margin: 30px auto;
    padding: 30px;
    border: 1px solid #e1e8ed;
    border-radius: 8px;
    background: #f9f9f9;
    text-align: center;
}

.payment-form {
    margin-top: 20px;
}

.form-group {
    margin-bottom: 20px;
    text-align: left;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #333;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    box-sizing: border-box;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: #3399cc;
    box-shadow: 0 0 0 2px rgba(51, 153, 204, 0.2);
}

.razorpay-payment-btn {
    background: #3399cc;
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.3s ease;
}

.razorpay-payment-btn:hover {
    background: #2980b9;
}

.razorpay-payment-btn:disabled {
    background: #bdc3c7;
    cursor: not-allowed;
}
</style>

<script>
// Initialize the payment integration when the page loads
document.addEventListener('DOMContentLoaded', function() {
    // Configure the integration
    setupGhostRazorpayIntegration({
        apiBaseUrl: 'https://ghost-razorpay-vercel.vercel.app', // Your Vercel deployment URL
        defaultAmount: 100000, // Default amount in smallest currency unit (1000 INR = 100000 paise)
        defaultCurrency: 'INR',
        membershipTier: 'basic',
        successRedirectUrl: window.location.origin + '/thank-you', // Customize as needed
        cancelRedirectUrl: window.location.origin + '/payment-cancelled' // Customize as needed
    });

    // Handle form submission
    document.getElementById('ghost-payment-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('member-email').value;
        const name = document.getElementById('member-name').value;
        const tier = document.getElementById('membership-tier').value;
        
        // Set amount based on tier
        let amount;
        switch(tier) {
            case 'basic':
                amount = 100000; // ₹1,000
                break;
            case 'premium':
                amount = 250000; // ₹2,500
                break;
            case 'pro':
                amount = 500000; // ₹5,000
                break;
            default:
                amount = 100000;
        }
        
        // Update the integration's membership tier
        window.ghostRazorpayIntegration.membershipTier = tier;
        
        // Initialize payment
        initializeGhostRazorpayPayment(email, name, amount, 'INR');
    });
});
</script>
